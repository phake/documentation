<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Verifying Calls Happen in a Particular Order</title><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"/><link rel="home" href="index.html" title="Phake - PHP Mocking Framework"/><link rel="up" href="ch02.html" title="Chapter 2. Method Verification"/><link rel="prev" href="ch02s03.html" title="Verifying Multiple Invocations"/><link rel="next" href="ch02s05.html" title="Verifying No Interaction with a Mock so Far"/></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Verifying Calls Happen in a Particular Order</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch02s03.html">Prev</a> </td><th width="60%" align="center">Chapter 2. Method Verification</th><td width="20%" align="right"> <a accesskey="n" href="ch02s05.html">Next</a></td></tr></table><hr/></div><div class="section" title="Verifying Calls Happen in a Particular Order"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a xmlns:saxon="http://icl.com/saxon" id="d4e80"/>Verifying Calls Happen in a Particular Order</h2></div></div></div>
		<p>
			Sometimes the desired behavior is that you verify calls happen in a particular order. Say there is a functional reason for the two variants of fooWithArgument() to be called in the order of the original test. You can utilize Phake::inOrder() to ensure the order of your call invocations. Phake::inOrder() takes one or more arguments and errors out in the event that one of the verified calls was invoked out of order. The calls don’t have to be in exact sequential order, there can be other calls in between, it just ensures the specified calls themselves are called in order relative to each other. Below is an example Phake test that behaves similarly to the PHPUnit test that utilized at().
		</p>
		<div class="example"><a xmlns:saxon="http://icl.com/saxon" id="method-verification.calls-in-order"/><p class="title"><b>Example 2.6. Verifying Multiple Calls in Order</b></p><div class="example-contents">
	
		<pre class="programlisting"><span class="hl-directive" style="color: maroon">&lt;?php</span>
<b class="hl-keyword">class</b> MyTest <b class="hl-keyword">extends</b> PHPUnit_Framework_TestCase
{
  <b class="hl-keyword">public</b> <b class="hl-keyword">function</b> testPHPUnitMock()
  {
    $mock = Phake::mock(<b class="hl-string"><i style="color:red">'PhakeTest_MockedClass'</i></b>);

    $mock-&gt;fooWithArgument(<b class="hl-string"><i style="color:red">'foo'</i></b>);
    $mock-&gt;fooWithArgument(<b class="hl-string"><i style="color:red">'bar'</i></b>);

    Phake::inOrder(
      Phake::verify($mock)-&gt;fooWithArgument(<b class="hl-string"><i style="color:red">'foo'</i></b>),
      Phake::verify($mock)-&gt;fooWithArgument(<b class="hl-string"><i style="color:red">'bar'</i></b>)
    );
  }
}
<span class="hl-directive" style="color: maroon">?&gt;</span></pre>
</div></div><br class="example-break"/>
	</div><div class="navfooter"><hr/><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch02s03.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch02.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch02s05.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Verifying Multiple Invocations </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Verifying No Interaction with a Mock so Far</td></tr></table></div></body></html>