<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 2. Method Verification</title><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"/><link rel="home" href="index.html" title="Phake - PHP Mocking Framework"/><link rel="up" href="index.html" title="Phake - PHP Mocking Framework"/><link rel="prev" href="ch01.html" title="Chapter 1. Getting Started"/><link rel="next" href="ch02s02.html" title="Verifying Method Parameters"/></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 2. Method Verification</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch01.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch02s02.html">Next</a></td></tr></table><hr/></div><div class="chapter" title="Chapter 2. Method Verification"><div class="titlepage"><div><div><h2 class="title"><a xmlns:saxon="http://icl.com/saxon" id="d4e43"/>Chapter 2. Method Verification</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="ch02.html#d4e45">Basic Method Verification</a></span></dt><dt><span class="section"><a href="ch02s02.html">Verifying Method Parameters</a></span></dt><dt><span class="section"><a href="ch02s03.html">Verifying Multiple Invocations</a></span></dt><dt><span class="section"><a href="ch02s04.html">Verifying Calls Happen in a Particular Order</a></span></dt><dt><span class="section"><a href="ch02s05.html">Verifying No Interaction with a Mock so Far</a></span></dt><dt><span class="section"><a href="ch02s06.html">Verifying No Further Interaction with a Mock</a></span></dt><dt><span class="section"><a href="ch02s07.html">Verifying Magic Methods</a></span></dt></dl></div>
	
	<div class="section" title="Basic Method Verification"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a xmlns:saxon="http://icl.com/saxon" id="d4e45"/>Basic Method Verification</h2></div></div></div>
		<p>
			Method call verification (or mocking) is accomplished via the Phake::verify() method. Phake::verify() accepts a mock object generated from Phake::mock() as its first object. The most basic way to use this method can be seen below.
		</p>
		<div class="example"><a xmlns:saxon="http://icl.com/saxon" id="method-verification.simple-verify"/><p class="title"><b>Example 2.1. Simple Verification</b></p><div class="example-contents">
	
		<pre class="programlisting"><span class="hl-directive" style="color: maroon">&lt;?php</span>
<b class="hl-keyword">class</b> PhakeTest1 <b class="hl-keyword">extends</b> PHPUnit_Framework_TestCase
{
  <b class="hl-keyword">public</b> <b class="hl-keyword">function</b> testBasicVerify()
  {
    $mock = Phake::mock(<b class="hl-string"><i style="color:red">'MyClass'</i></b>);

    $mock-&gt;foo();

    Phake::verify($mock)-&gt;foo();
  }
}
<span class="hl-directive" style="color: maroon">?&gt;</span></pre>
</div></div><br class="example-break"/>
		<p>
			The Phake::verify() call here, verifies that the method foo() has been called once (and only once) with no parameters on the object $mock. A very important thing to note here that is a departure from most (if not all) other PHP mocking frameworks is that you want to verify the method call AFTER the method call takes place. Other mocking frameworks such as the one built into PHPUnit depend on you setting the expectations of what will get called prior to running the system under test.
		</p>
		<p>
			Phake strives to allow you to follow the four phases of a unit test as layed out in xUnit Test Patterns: setup, exercise, verify, and teardown. The setup phase of a test using Phake for mocking will now include calls to Phake::mock() for each class you want to mock. The exercise portion of your code will remain the same. The verify section of your code will include calls to Phake::verify(). The exercise and teardown phases will remain unchanged.
		</p>
	</div>
	
	
	
	
	
	
</div><div class="navfooter"><hr/><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch01.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch02s02.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 1. Getting Started </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Verifying Method Parameters</td></tr></table></div></body></html>